<template>
  <style>
    .key-metric {
      font-size: 36px;
      color: #222;
      min-width: 200px;
    }
  </style>

  <require from="./date-format"></require>
  <require from="./number-format"></require>

  <section class="au-animate" style="margin-top:15px;">
    <form class="pure-form pure-form-stacked" if.bind="!isReady">
        <fieldset>

            <label for="operator">Operator</label>
            <select value.bind="operator" id="operator">
              <option value="">-- select operator --</option>
              <option repeat.for="operator of operators">${operator}</option>
            </select>

            <label for="beanDescription">Bean Description</label>
            <input id="beanDescription" type="text" style="width: 500px; max-width: 100%" placeholder="enter bean description" value.bind="beanDescription">

            <a class="button" style="margin-top:35px" click.trigger="ready()"><i class="fa fa-check"></i> Ready</a>
        </fieldset>
    </form>

    <div class="toolbar" if.bind="isReady">
      <div style="display:inline-block;vertical-align:top;margin-top:15px;">
        <a if.bind="!jobRunning" click.trigger="startJob()"><i class="fa fa-play"></i> start</a>
        <a if.bind="jobRunning" click.trigger="stopJob()"><i class="fa fa-stop"></i> stop</a>
        <!--<a if.bind="jobRunning" click.trigger="stopJob()"><i class="fa fa-ellipsis-h"></i>
          <span if.bind="!showDetails" click.trigger="toggleDetails()">show details</span>
          <span if.bind="showDetails" click.trigger="toggleDetails()">hide details</span>
        </a>-->
        <a if.bind="canPrint" click.trigger="printJob()"><i class="fa fa-print"></i> print</a>
        <a if.bind="!jobRunning" click.trigger="editJob()"><i class="fa fa-info"></i> info</a>
      </div>

      <div style="margin-left:150px;display:inline-block;">
        <table>
          <tr>
            <td>Time:</td>
            <td>Temp (&#8457;):</td>
            <td>Pressure (w.c.):</td>
          </tr>
          <tr>
            <td class="key-metric elapsed">${elapsed | dateFormat:'mm:ss'}</td>
            <td class="key-metric currentTemp">${currentTemp | numberFormat:'0,0.0'}</td>
            <td class="key-metric currentPressure">${currentPressure | numberFormat:'0,0.0'}</td>
          </tr>
        </table>
      </div>
    </div>

    <div id="chart" style="width:100%;height:500px"></div>

    <table class="pure-table" id="dataStream" if.bind="showDetails">
      <thead>
        <tr>
          <th>time</th>
          <th>room</th>
          <th>drum</th>
          <th>beans</th>
          <th>wc</th>
        </tr>
      </thead>
      <tbody>
        <tr repeat.for="row of dataStream">
          <td>${row.sensor_time | dateFormat:'h:mm:ss a'}</td>
          <td>${row.roomTemp}</td>
          <td>${row.drumTemp}</td>
          <td>${row.beanTemp}</td>
          <td>${row.waterColumns}</td>
        </tr>
      </tbody>
    </table>
  </section>

</template>
